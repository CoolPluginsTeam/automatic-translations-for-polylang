(()=>{"use strict";var e={473:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(354),a=n.n(r),o=n(314),s=n.n(o)()(a());s.push([e.id,".sq8lWk7XGk2hxVloV7ab{\n  opacity: 0.5;\n}\n\n.TcXBn491UlNpojTuuzZ1 {\n  scale: 1.5;\n}\n\n.q2yBqJZLcQCdi9X_RiNP {\n  width: 400px;\n}\n\n.GxB2kuILLFxjtjLpaF_9 {\n  margin-top: 1rem;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: column;\n  gap: 0.5em;\n}\n\n.yABipsWnxMoAopP4524n {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 0.5em;\n  gap: 0.5em;\n}\n\n.kMYSeLwx9zk1d1mVJrVF {\n  padding: .5rem;\n  border: 1px solid #ff4646;\n  border-radius: 0.5em;\n}\n\n.CKZg6Q7wpP_IsukC_kOE {\n  border: 1px solid #d1d5db;\n  padding: .5rem;\n  border-radius: 5px;\n  margin-bottom: .5rem;\n}\n\n.Zn23Vnc_SMJ7nLepi9aQ {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5em;\n}\n","",{version:3,sources:["webpack://./block-translator/editorAssets/plugins/ParagraphTranslator.module.css"],names:[],mappings:"AAAA;EACE,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,gBAAgB;EAChB,aAAa;EACb,yBAAyB;EACzB,sBAAsB;EACtB,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,eAAU;EAAV,UAAU;AACZ;;AAEA;EACE,cAAc;EACd,yBAAyB;EACzB,oBAAoB;AACtB;;AAEA;EACE,yBAAyB;EACzB,cAAc;EACd,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,UAAU;AACZ",sourcesContent:[".disabledToolbarIcon{\r\n  opacity: 0.5;\r\n}\r\n\r\n.toolbarIcon {\r\n  scale: 1.5;\r\n}\r\n\r\n.modal {\r\n  width: 400px;\r\n}\r\n\r\n.controls {\r\n  margin-top: 1rem;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  flex-direction: column;\r\n  gap: 0.5em;\r\n}\r\n\r\n.langWrapper {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 0.5em;\r\n}\r\n\r\n.error {\r\n  padding: .5rem;\r\n  border: 1px solid #ff4646;\r\n  border-radius: 0.5em;\r\n}\r\n\r\n.translatedContent {\r\n  border: 1px solid #d1d5db;\r\n  padding: .5rem;\r\n  border-radius: 5px;\r\n  margin-bottom: .5rem;\r\n}\r\n\r\n.translateButton {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5em;\r\n}\r\n"],sourceRoot:""}]),s.locals={disabledToolbarIcon:"sq8lWk7XGk2hxVloV7ab",toolbarIcon:"TcXBn491UlNpojTuuzZ1",modal:"q2yBqJZLcQCdi9X_RiNP",controls:"GxB2kuILLFxjtjLpaF_9",langWrapper:"yABipsWnxMoAopP4524n",error:"kMYSeLwx9zk1d1mVJrVF",translatedContent:"CKZg6Q7wpP_IsukC_kOE",translateButton:"Zn23Vnc_SMJ7nLepi9aQ"};const i=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&s[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},364:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(72),a=n.n(r),o=n(825),s=n.n(o),i=n(659),l=n.n(i),c=n(56),u=n.n(c),p=n(159),d=n.n(p),g=n(113),m=n.n(g),f=n(473),A={};A.styleTagTransform=m(),A.setAttributes=u(),A.insert=l().bind(null,"head"),A.domAPI=s(),A.insertStyleElement=d(),a()(f.A,A);const h=f.A&&f.A.locals?f.A.locals:void 0},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},s=[],i=0;i<e.length;i++){var l=e[i],c=r.base?l[0]+r.base:l[0],u=o[c]||0,p="".concat(c," ").concat(u);o[c]=u+1;var d=n(p),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(g);else{var m=a(g,r);r.byIndex=i,t.splice(i,0,{identifier:p,updater:m,references:1})}s.push(p)}return s}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var i=n(o[s]);t[i].references--}for(var l=r(e,a),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},267:(e,t,n)=>{n.d(t,{A:()=>r});const r=class{constructor(e){this.supportedLanguage=[],this.supportedLanguage=e}async Status(){const e=await window.self.ai.languageDetector.capabilities();return"readily"===(null==e?void 0:e.available)}async Detect(e){const t=await window.self.ai.languageDetector.create(),n=e.trim(),r=(await t.detect(n)).slice(0,5).map((e=>this.supportedLanguage.includes(e.detectedLanguage)?e.detectedLanguage:null)).filter(Boolean);return r.length>0?r[0]:null}}},476:(e,t,n)=>{n.d(t,{A:()=>r});const r={en:"English",es:"Spanish",ja:"Japanese",ar:"Arabic",bn:"Bengali",de:"German",fr:"French",hi:"Hindi",it:"Italian",ko:"Korean",nl:"Dutch",pl:"Polish",pt:"Portuguese",ru:"Russian",th:"Thai",tr:"Turkish",vi:"Vietnamese",zh:"Chinese","zh-hant":"Chinese (Traditional)",bg:"Bulgarian",cs:"Czech",da:"Danish",el:"Greek",fi:"Finnish",hr:"Croatian",hu:"Hungarian",id:"Indonesian",iw:"Hebrew",lt:"Lithuanian",no:"Norwegian",ro:"Romanian",sk:"Slovak",sl:"Slovenian",sv:"Swedish",uk:"Ukrainian","en-zh":"English (Chinese)"}},937:(e,t,n)=>{n.d(t,{A:()=>r});const r=class{constructor(e,t,n){this.createTranslator=async()=>{if(!this.translator)return this.translator=await window.self.translation.createTranslator({sourceLanguage:this.sourceLang,targetLanguage:this.targetLang}),{error:!1}},this.startTranslation=async e=>await this.translator.translate(e),this.sourceLang=e,this.targetLang=t,this.targetLangLabel=n}async LanguagePairStatus(){var e;if(!(null===(e=null===window||void 0===window?void 0:window.self)||void 0===e?void 0:e.translation))throw new Error("The Prompt API is not available");const t=await window.self.translation.canTranslate({sourceLanguage:this.sourceLang,targetLanguage:this.targetLang});return"after-download"===t?{error:'<span style="color: #ff4646; display: inline-block;">Please install the <strong>'+this.targetLangLabel+" ("+this.targetLang+')</strong> language pack to proceed.To install the language pack, visit <strong>chrome://on-device-translation-internals</strong>. For further assistance, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">documentation</a>.</span>'}:"readily"!==t?{error:'<span style="color: #ff4646; display: inline-block;">Please ensure that the <strong>'+this.targetLangLabel+" ("+this.targetLang+')</strong> language pack is installed and set as a preferred language in your browser. To install the language pack, visit <strong>chrome://on-device-translation-internals</strong>. For further assistance, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">documentation</a>.</span>'}:(await this.createTranslator(),!0)}}},626:(e,t,n)=>{n.d(t,{A:()=>r});const r=()=>{var e;return Boolean(null===(e=window.ai)||void 0===e?void 0:e.languageDetector)}},86:(e,t,n)=>{n.d(t,{A:()=>r});const r=()=>Boolean(window.self.translation)},540:(e,t,n)=>{var r=n(876),a=n(223),o=n(715),s=n(427),i=n(87),l=n(364),c=n(937),u=n(86),p=n(476),d=n(626),g=n(267);(0,u.A)()&&(0,r.registerFormatType)("atfp/paragraph-rewriter",{title:"AI Paragraph Rewriter",name:"atfp/paragraph-rewriter",interactive:!0,tagName:"atfp-paragraph-rewriter",className:null,edit:({value:e,onChange:t})=>{let n="hi",m="es";const f=window.atfpBlockTranslator;if(f&&"object"==typeof f&&"pageLanguage"in f){const e=f.pageLanguage;e&&""!==e&&(m=e,"en"===e&&(n="es"))}const[A,h]=(0,i.useState)(!1),[v,y]=(0,i.useState)(""),[w,b]=(0,i.useState)(!1),[C,E]=(0,i.useState)(""),L=(0,i.useRef)(null),[k,x]=(0,i.useState)(n),[B,T]=(0,i.useState)(m),[O,j]=(0,i.useState)(Object.keys(p.A).filter((e=>e!==n))),[P,S]=(0,i.useState)(""),[_,I]=(0,i.useState)("");(0,i.useEffect)((()=>{e&&""!==e.text.trim()&&e.start!==e.end&&!w?b(!0):!w||e&&""!==e.text.trim()&&e.start!==e.end||b(!1)}),[e]);const N=async e=>{x(e),j(Object.keys(p.A).filter((t=>t!==e))),M(B,e,v)},M=async(e,t,n)=>{const r=new c.A(t,e,p.A[e]),a=await r.LanguagePairStatus();if(!0!==a&&a.hasOwnProperty("error")&&""!==a.error)return void I(a.error);if(""!==_&&I(""),!r||!r.hasOwnProperty("startTranslation"))return;const o=await r.startTranslation(n);E(o)};return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(o.BlockControls,null,wp.element.createElement(s.ToolbarGroup,null,wp.element.createElement(s.ToolbarButton,{icon:()=>wp.element.createElement(a.GhY,{size:20}),title:"AI Paragraph Translate",className:w?"":l.A.disabledToolbarIcon,onClick:()=>{if(!w)return;const t=e.text.slice(e.start,e.end);h(!0),I(""),S(""),window.hasOwnProperty("chrome")&&navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Edg")?(0,u.A)()?(y(t),window.setTimeout((()=>{var e;return null===(e=L.current)||void 0===e?void 0:e.focus()}),100),(0,d.A)()?(async e=>{const t=new g.A(Object.keys(p.A));if(await t.Status()){const n=await t.Detect(e);n?n===B?N(n):(x(n),M(B,n,e)):M(B,k,e)}else M(B,k,e)})(t):M(B,k,t)):S('<span style="color: #ff4646; display: inline-block;">The Translator AI modal is currently not supported or disabled in your browser. Please enable it. For detailed instructions on how to enable the Translator AI modal in your Chrome browser, <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">click here</a>.</span>'):S('<span style="color: #ff4646; display: inline-block;">The Translator API, which uses local AI models, only works in the Chrome browser. For more details, <a href="https://developer.chrome.com/docs/ai/translator-api" target="_blank">click here</a>.</span>')}}))),A&&wp.element.createElement(s.Modal,{title:"Chrome built-in translator AI",onRequestClose:()=>h(!1)},P&&""!==P?wp.element.createElement("div",{className:l.A.error},P):wp.element.createElement("div",{className:l.A.modal},wp.element.createElement("div",{className:l.A.controls},wp.element.createElement("div",{className:l.A.langWrapper},wp.element.createElement(s.SelectControl,{label:"Source Language",value:k,options:Object.keys(p.A).map((e=>({label:p.A[e],value:e}))),onChange:e=>N(e)}),wp.element.createElement(s.SelectControl,{label:"Target Language",value:B,options:O.map((e=>({label:p.A[e],value:e}))),onChange:e=>(async e=>{T(e),M(e,k,v)})(e)})),_&&""!==_&&wp.element.createElement("div",{className:l.A.error,dangerouslySetInnerHTML:{__html:_}}),C&&""!==C&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{className:l.A.translatedContent,dangerouslySetInnerHTML:{__html:C}}),wp.element.createElement(s.Button,{className:l.A.translateButton,variant:"primary",onClick:()=>{const n=(0,r.insert)(e,C,e.start,e.end);t(n),h(!1)}},"Replace Text"))))))}})},609:e=>{e.exports=window.React},715:e=>{e.exports=window.wp.blockEditor},427:e=>{e.exports=window.wp.components},87:e=>{e.exports=window.wp.element},876:e=>{e.exports=window.wp.richText},689:(e,t,n)=>{n.d(t,{k:()=>u});var r=n(609),a=n(535),o=["attr","size","title"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){var r,a,o,s;r=e,a=t,o=n[t],(a="symbol"==typeof(s=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a))?s:s+"")in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return e&&e.map(((e,t)=>r.createElement(e.tag,l({key:t},e.attr),c(e.child))))}function u(e){return t=>r.createElement(p,s({attr:l({},e.attr)},t),c(e.child))}function p(e){var t=t=>{var n,{attr:a,size:i,title:c}=e,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,o),p=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:n,style:l(l({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==a.V?r.createElement(a.V.Consumer,null,(e=>t(e))):t(a.f)}},535:(e,t,n)=>{n.d(t,{V:()=>o,f:()=>a});var r=n(609),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(a)},390:(e,t,n)=>{},63:(e,t,n)=>{n.d(t,{k5:()=>r.k}),n(390);var r=n(689);n(535)},223:(e,t,n)=>{n.d(t,{GhY:()=>a});var r=n(63);function a(e){return(0,r.k5)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M19.7134 8.12811L19.4668 8.69379C19.2864 9.10792 18.7136 9.10792 18.5331 8.69379L18.2866 8.12811C17.8471 7.11947 17.0555 6.31641 16.0677 5.87708L15.308 5.53922C14.8973 5.35653 14.8973 4.75881 15.308 4.57612L16.0252 4.25714C17.0384 3.80651 17.8442 2.97373 18.2761 1.93083L18.5293 1.31953C18.7058 0.893489 19.2942 0.893489 19.4706 1.31953L19.7238 1.93083C20.1558 2.97373 20.9616 3.80651 21.9748 4.25714L22.6919 4.57612C23.1027 4.75881 23.1027 5.35653 22.6919 5.53922L21.9323 5.87708C20.9445 6.31641 20.1529 7.11947 19.7134 8.12811ZM22.9 21L18.5 10H16.5L12.101 21H14.255L15.454 18H19.544L20.745 21H22.9ZM16.253 16L17.5 12.8852L18.745 16H16.253ZM7.5466 12.3036C6.41407 11.0171 5.45992 9.56967 4.72266 8H6.96329C7.53108 9.04434 8.21011 10.0196 8.98442 10.9097C10.2737 9.48824 11.3027 7.82653 11.9961 6H2V4H8V2H10V4H14.6497C14.5624 4.42994 14.4594 4.85421 14.3412 5.27216C13.5862 7.94155 12.2142 10.3512 10.389 12.3375C11.1089 12.9848 11.8869 13.5688 12.7142 14.0805L11.9615 15.9627C10.8814 15.3228 9.87297 14.5749 8.95119 13.7336C7.17781 15.2694 5.09248 16.4547 2.8027 17.1819L2.1973 15.2757C4.18364 14.6449 5.99672 13.6242 7.5466 12.3036Z"},child:[]}]})(e)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,n(540)})();
//# sourceMappingURL=index.js.map