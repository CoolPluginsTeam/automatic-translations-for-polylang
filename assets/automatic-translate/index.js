(()=>{"use strict";var t={338:(t,e,a)=>{var n=a(795);e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot},795:t=>{t.exports=window.ReactDOM}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,a),s.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};a.r(n),a.d(n,{contentSaveSource:()=>K,contentSaveTranslate:()=>G,excerptSaveSource:()=>Y,excerptSaveTranslate:()=>X,metaFieldsSaveSource:()=>J,metaFieldsSaveTranslate:()=>Z,titleSaveSource:()=>z,titleSaveTranslate:()=>W});var r={};a.r(r),a.d(r,{getTranslatedString:()=>et,getTranslationEntry:()=>tt});var s=a(338);const o=window.wp.element,{__}=wp.i18n,l=t=>React.createElement("div",{className:"modal-header",key:t.modalRender},React.createElement("span",{className:"close",onClick:()=>{t.setPopupVisibility(!1)}},"×"),React.createElement("h2",{className:"notranslate"},__("Step 2 - Start Automatic Translation Process","automatic-translations-for-polylang")),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translateStatus,onClick:t.updatePostData},__("Update Content","automatic-translations-for-polylang")))),i=window.React,c=t=>{const e=t=>{const a=document.createElement("div");a.innerHTML=t;const n=a.firstElementChild;if(!n)return t;let r=n.children;const s=r.length;if(s>0)for(let t=0;t<s;t++){let a=r[t],n=e(a.outerHTML);a.outerHTML=n}const o=n.outerHTML.match(/^<[^>]+>/)[0],l=n.tagName.toLowerCase(),i=new RegExp(`</${l}>`,"i"),c=n.outerHTML.match(i);if("<style>"===o)return`#atfp_open_translate_span#${n.outerHTML}#atfp_close_translate_span#`;const d=n.innerHTML;n.innerHTML="";let p=`#atfp_open_translate_span#${o}#atfp_close_translate_span#`,u="",g="";return c&&(u=`#atfp_open_translate_span#</${l}>#atfp_close_translate_span#`),""!==d?(""!==p&&(g=p+d),""!==u&&(g+=u)):g=p+u,n.outerHTML=g,a.innerHTML},a="yandex"===t.service||"localAiTranslator"===t.service?(a=>{const n=document.createElement("div");n.innerHTML=a,function(t){let a=t.children;const n=()=>{if(a.length>0){let t=a[0],r=e(t.outerHTML);const s=document.createTextNode(r);t.replaceWith(s),n()}};n()}(n);let r=n.innerText;return/^(_yoast_wpseo_|rank_math_|_seopress_)/.test(t.contentKey.trim())&&(r=(t=>t.replace(/(%{1,2}[a-zA-Z0-9_]+%{0,2})/g,(t=>`#atfp_open_translate_span#${t}#atfp_close_translate_span#`)))(r)),(t=>t.split(/(#atfp_open_translate_span#.*?#atfp_close_translate_span#)|'/).filter(Boolean).filter((t=>""!==t.trim())))(r)})(t.content):t.content;t.translateContent(a),t.currentIndex===t.totalString&&t.translateContent({stringRenderComplete:!0});const n=/#atfp_open_translate_span#[\s\S]*?#atfp_close_translate_span#/,r=/#atfp_open_translate_span#|#atfp_close_translate_span#/g;return React.createElement(React.Fragment,null,"yandex"===t.service||"localAiTranslator"===t.service?a.map(((t,e)=>n.test(t)?React.createElement("span",{key:e,className:"notranslate atfp-notraslate-tag",translate:"no"},(t=>t.replace(r,""))(t)):t)):a)},d={_yoast_wpseo_title:{type:"string"},_yoast_wpseo_focuskw:{type:"string"},_yoast_wpseo_metadesc:{type:"string"},_yoast_wpseo_bctitle:{type:"string"},"_yoast_wpseo_opengraph-title":{type:"string"},"_yoast_wpseo_opengraph-description":{type:"string"},"_yoast_wpseo_twitter-title":{type:"string"},"_yoast_wpseo_twitter-description":{type:"string"},rank_math_title:{type:"string"},rank_math_description:{type:"string"},rank_math_focus_keyword:{type:"string"},rank_math_facebook_title:{type:"string"},rank_math_facebook_description:{type:"string"},rank_math_twitter_title:{type:"string"},rank_math_twitter_description:{type:"string"},rank_math_breadcrumb_title:{type:"string"},_seopress_titles_title:{type:"string"},_seopress_titles_desc:{type:"string"},_seopress_social_fb_title:{type:"string"},_seopress_social_fb_desc:{type:"string"},_seopress_social_twitter_title:{type:"string"},_seopress_social_twitter_desc:{type:"string"},_seopress_analysis_target_kw:{type:"string"}},{dispatch:p}=wp.data,u=({type:t,key:e,translateContent:a,source:n,provider:r})=>{if(["title","excerpt"].includes(t)){const e=`${t}SaveTranslate`;p("block-atfp/translate")[e](a,r)}else["metaFields"].includes(t)?Object.keys(d).includes(e)&&p("block-atfp/translate").metaFieldsSaveTranslate(e,a,n,r):p("block-atfp/translate").contentSaveTranslate(e,a,n,r)},g=t=>{t.querySelector(".atfp_translate_progress").style.display="none",t.querySelector(".atfp_string_container").style.animation="none",document.body.style.top="0";const e=t.querySelector("button.save_it");e.removeAttribute("disabled"),e.classList.add("translated"),e.classList.remove("notranslate"),document.getElementById("atfp_strings_model").querySelector(".atfp_string_container").querySelectorAll("td.translate[data-string-type]").forEach((t=>{const e=t.innerText,a=t.dataset.key,n=t.dataset.stringType,r=t.closest("tr").querySelector('td[data-source="source_text"]').innerText;u({type:n,key:a,translateContent:e,source:r,provider:"yandex"})}))},m=t=>{let e=!1;const a=document.getElementById("atfp_strings_model"),n=a.querySelector(".atfp_string_container");n.scrollTop=0;const r=n.scrollHeight;void 0!==r&&r>100?(a.querySelector(".atfp_translate_progress").style.display="block",setTimeout((()=>{const t=2e3*Math.ceil(r/n?.offsetHeight);(t=>{const{element:e,scrollSpeed:a}=t,n=e.scrollHeight-e.offsetHeight+100;let r=null,s=e.scrollTop;const o=()=>{const t=performance.now();r||(r=t);const l=s+(t-r)/a*(n+2e3-s);l>n||(e.scrollTop=l,l<n&&setTimeout(o,16))};o()})({element:n,scrollSpeed:t})}),2e3),n.addEventListener("scroll",(()=>{n.scrollTop+n.clientHeight+50>=n.scrollHeight&&!e&&(t(),g(a),e=!0)})),n.clientHeight+10>=r&&setTimeout((()=>{t(),g(a)}),1500)):setTimeout((()=>{t(),g(a)}),2e3)},h=(t,e,a,n,r,s,o)=>{var l={keycode:{ESCAPE:27},getRequest:function(){return t.XDomainRequest?new t.XDomainRequest:t.XMLHttpRequest?new t.XMLHttpRequest:null},loadScript:function(t,a,n){var r=e.createElement("script");r.src=t,r.addEventListener("load",(function t(){this.removeEventListener("load",t,!1),n()}),!1),a.appendChild(r)},loadResource:function(e,a){var n=this.getRequest();return n?(n.onload=function(){a(this.responseText)},n.open("GET",e,!0),t.setTimeout((function(){n.send()}),0),n):null},getStyleList:function(t){var e=t.getAttribute("class");return e?e.replace(/\s+/g," ").trim().split(" "):[]},hasStyleName:function(t,e){var a=this.getStyleList(t);return!!a.length&&a.indexOf(e)>=0},addStyleName:function(t,e){var a=this.getStyleList(t);a.push(e),t.setAttribute("class",a.join(" "))},removeStyleName:function(t,e){var a=this.getStyleList(t),n=a.indexOf(e);n>=0&&(a.splice(n,1),t.setAttribute("class",a.join(" ")))},isSupportedBrowser:function(){return"localStorage"in t&&"querySelector"in e&&"addEventListener"in t&&"getComputedStyle"in t&&"CSS1Compat"===e.compatMode}},i=function(t,e){var a=this;t.addEventListener("click",(function(t){a.onClick(t)}),!1),this._element=t,this._contentElement=e||this._element};i.prototype.onClick=function(){},i.prototype.setText=function(t){return this._contentElement.textContent=t,this};var c=function(t,e){var a=this;t.reset(),t.addEventListener("click",(function(t){var e=t.target;"value"in e&&a.onSelect(e.value)}),!1),t.addEventListener("change",(function(t){alert("form change state");var e=t.target;e.checked&&a.onChange(e.value)}),!1),this._form=t,this._itemName=e};c.prototype.onSelect=function(){},c.prototype.onChange=function(){},c.prototype.isHidden=function(){return this._form.hasAttribute("hidden")},c.prototype.getItems=function(){return this._form[this._itemName]||[]},c.prototype.getValue=function(){var t,e,a=this.getItems();for(t=0,e=a.length;t<e;t++)if(a[t].checked)return a[t].value;return""},c.prototype.setValue=function(t){var e,a,n=this.getItems();if(t===this.getValue())return this;for(e=0,a=n.length;e<a;e++)if(n[e].value===t){n[e].checked=!0,this.onChange(t);break}return this},c.prototype.setHidden=function(t){return(t=!!t)!==this.isHidden()&&(this._form[(t?"set":"remove")+"Attribute"]("hidden",""),this.onHiddenChange(t)),this},c.prototype.onHiddenChange=function(){};var d=function(a){var n,r=this,i=a.select,c=a.element,d=a.storage,p=(a.autoMode,a.pageLang),u=(a.userLang,a.translator),g=a.leftButton,h=a.rightButton,_=a.closeButton;if(this._element=c,this._pageLang=p,this._translator=u,this.onStateChange=function(t,e){"active"===t&&d.setValue("active",e)},i.onSelect=function(t){this.setHidden(!0),r.translate(t),m(o)},i.onChange=function(t){d.setValue("lang",t),h.setText(t),r.setState("invalid",t===p)},i.onHiddenChange=function(a){var n,s=e.documentElement;r.setState("expanded",!a),a||(r.setState("right",!1).setState("bottom",!1),c.focus(),(n=this._form.getBoundingClientRect()).right+(t.pageXOffset||s.scrollLeft)+1>=Math.max(s.clientWidth,s.scrollWidth)&&r.setState("right",!0),n.bottom+(t.pageYOffset||s.scrollTop)+1>=Math.max(s.clientHeight,s.scrollHeight)&&r.setState("bottom",!0))},c.addEventListener("blur",(function(){i.setHidden(!0)}),!1),c.addEventListener("keydown",(function(t){t.keyCode===l.keycode.ESCAPE&&i.setHidden(!0)}),!1),u.on("error",(function(){this.abort(),r.setState("busy",!1).setState("error",!0)})),u.on("progress",(function(t){switch(t){case 0:r.setState("busy",!0).setState("active",!0);break;case 100:r.setState("done",!0).setState("busy",!1)}})),g.onClick=function(){i.setHidden(!0),r.translate(i.getValue()),m(o)},h.onClick=function(){r.hasState("active")?(u.undo(),r.setState("busy",!1).setState("done",!1).setState("error",!1).setState("active",!1)):i.setHidden(!i.isHidden())},_.onClick=function(){i.setHidden(!0)},null!=s)var y=s;switch(y){case"nb":case"nn":n="no";break;default:n=y}n&&(i.setValue(n),d.getValue("active"))};d.prototype.hasState=function(t){return l.hasStyleName(this._element,"yt-state_"+t)},d.prototype.setState=function(t,e){return(e=!!e)===this.hasState(t)||(l[(e?"add":"remove")+"StyleName"](this._element,"yt-state_"+t),this.onStateChange(t,e)),this},d.prototype.translate=function(t){return t&&!this.hasState("active")&&this._translator.translate(this._pageLang,t),this},d.prototype.onStateChange=function(){};var p=function(e){this._name=e;try{this._data=t.JSON.parse(t.localStorage[e])}catch(t){this._data={}}};p.prototype.getValue=function(t){return this._data[t]},p.prototype.setValue=function(e,a){this._data[e]=a;try{t.localStorage[this._name]=t.JSON.stringify(this._data)}catch(t){}};var u=e.getElementById(n.widgetId);if(u&&l.isSupportedBrowser()){var g=function(){l.loadScript("https://yastatic.net/s3/translate/v21.4.7/js/tr_page.js",u,(function(){l.loadResource("https://translate.yandex.net/website-widget/v1/widget.html",(function(t){var e;t&&(u.innerHTML=t,e=u.querySelector(".yt-widget"),n.widgetTheme&&e.setAttribute("data-theme",n.widgetTheme),new d({select:new c(e.querySelector(".yt-listbox"),"yt-lang"),element:e,storage:new p("yt-widget"),autoMode:"true"===n.autoMode,pageLang:n.pageLang,userLang:(a.language||a.userLanguage||"").split("-")[0],translator:new r.PageTranslator({srv:"tr-url-widget",url:"https://translate.yandex.net/api/v1/tr.json/translate",autoSync:!0,maxPortionLength:600}),leftButton:new i(e.querySelector(".yt-button_type_left")),rightButton:new i(e.querySelector(".yt-button_type_right"),e.querySelector(".yt-button_type_right > .yt-button__text")),closeButton:new i(e.querySelector(".yt-button_type_close"))}))}))}))};"complete"===e.readyState||"interactive"===e.readyState?g():e.addEventListener("DOMContentLoaded",g,!1)}};class _{static Object=t=>new this(t).extraData();constructor(t){this.btnSelector=t.btnSelector||!1,this.btnClass=t.btnClass||!1,this.btnText=t.btnText||`Translate To ${t.targetLanguageLabel} (Beta)`,this.stringSelector=t.stringSelector||!1,this.progressBarSelector=t.progressBarSelector||!1,this.onStartTranslationProcess=t.onStartTranslationProcess||(()=>{}),this.onComplete=t.onComplete||(()=>{}),this.onLanguageError=t.onLanguageError||(()=>{}),this.onBeforeTranslate=t.onBeforeTranslate||(()=>{}),this.onAfterTranslate=t.onAfterTranslate||(()=>{}),this.sourceLanguage=t.sourceLanguage||"en",this.targetLanguage=t.targetLanguage||"hi",this.targetLanguageLabel=t.targetLanguageLabel||"Hindi"}extraData=async()=>{const t=await _.languageSupportedStatus(this.sourceLanguage,this.targetLanguage,this.targetLanguageLabel);return!0!==t?(this.onLanguageError(t),{}):(this.defaultLang=this.targetLanguage,{continueTranslation:this.continueTranslation,stopTranslation:this.stopTranslation,startTranslation:this.startTranslation,reInit:this.reInit,init:this.init})};static languageSupportedStatus=async(t,e,a)=>{const n=["en","es","ja","ar","bn","de","fr","hi","it","ko","nl","pl","pt","ru","th","tr","vi","zh","zh-hant","bg","cs","da","el","fi","hr","hu","id","iw","lt","no","ro","sk","sl","sv","uk","en-zh"].map((t=>t.toLowerCase()));if(!window.hasOwnProperty("chrome")||!navigator.userAgent.includes("Chrome")||navigator.userAgent.includes("Edg"))return jQuery('<span style="color: #ff4646; margin-top: .5rem; display: inline-block;">The Translator API, which uses local AI models, only works in the Chrome browser. For more details, <a href="https://developer.chrome.com/docs/ai/translator-api" target="_blank">click here</a>.</span>');if(!("translation"in self)||!("createTranslator"in self.translation))return jQuery('<span style="color: #ff4646; margin-top: .5rem; display: inline-block;">The Translator AI modal is currently not supported or disabled in your browser. Please enable it. For detailed instructions on how to enable the Translator AI modal in your Chrome browser, <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">click here</a>.</span>');if(!n.includes(e.toLowerCase()))return jQuery(`<span style="color: #ff4646; margin-top: .5rem; display: inline-block;">Unfortunately, the <strong>${a} (${e})</strong> language is currently not supported by the Local Translator AI modal. Please check and read the docs which languages are currently supported by <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">clicking here</a>.</span>`);const r=await translation.canTranslate({sourceLanguage:t,targetLanguage:e});return"after-download"===r?jQuery(`<span style="color: #ff4646; margin-top: .5rem; display: inline-block;">Please install the <strong>${a} (${e})</strong> language pack to proceed.To install the language pack, visit <strong>chrome://on-device-translation-internals</strong>. For further assistance, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">documentation</a>.</span>`):"readily"===r||jQuery(`<span style="color: #ff4646; margin-top: .5rem; display: inline-block;">Please ensure that the <strong>${a} (${e})</strong> language pack is installed and set as a preferred language in your browser. To install the language pack, visit <strong>chrome://on-device-translation-internals</strong>. For further assistance, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#bypass_language_restrictions_for_local_testing" target="_blank">documentation</a>.</span>`)};init=async()=>{this.appendBtn(),this.translationStart=!1,this.completedTranslateIndex=0,this.completedCharacterCount=0,this.translateBtnEvents(),this.progressBarSelector&&this.addProgressBar()};appendBtn=()=>{this.translateBtn=jQuery(`<button class="button button-primary${this.btnClass?" "+this.btnClass:""}">${this.btnText}</button>`),jQuery(this.btnSelector).append(this.translateBtn)};translateBtnEvents=t=>this.btnSelector&&0!==jQuery(this.btnSelector).length?this.stringSelector&&0!==jQuery(this.stringSelector).length?(this.translateStatus=!0,this.translateBtn.off("click"),this.translateBtn.prop("disabled",!1),void(this.translationStart?this.translateStringEle.length>this.completedTranslateIndex+1?this.translateBtn.on("click",(()=>{this.onStartTranslationProcess(),this.stringTranslation(this.completedTranslateIndex+1)})):(this.onComplete({translatedStringsCount:this.completedCharacterCount}),this.translateBtn.prop("disabled",!0)):this.translateBtn.on("click",this.startTranslationProcess))):this.onLanguageError("The string selector is missing. Please provide a valid selector for the strings to be translated."):this.onLanguageError("The button selector is missing. Please provide a valid selector for the button.");startTranslationProcess=async()=>{this.onStartTranslationProcess();const t=this.defaultLang;this.translationStart=!0,this.translateStringEle=jQuery(this.stringSelector),this.totalStringCount=Array.from(this.translateStringEle).map((t=>t.innerText.length)).reduce(((t,e)=>t+e),0),this.translator=await self.translation.createTranslator({sourceLanguage:this.sourceLanguage,targetLanguage:t}),this.translateStringEle.length>0&&await this.stringTranslation(this.completedTranslateIndex)};stringTranslation=async t=>{if(!this.translateStatus)return;const e=this.translateStringEle[t];this.onBeforeTranslate(e);const a=e.innerText;let n=[];(e.childNodes.length>0&&!e.querySelector(".notranslate")||e.querySelector(".notranslate"))&&e.childNodes.forEach((t=>{3===t.nodeType&&""!==t.nodeValue.trim()&&n.push(t)})),n.length>0&&await this.stringTranslationBatch(n,0),this.completedCharacterCount+=a.length,this.completedTranslateIndex=t,this.progressBarSelector&&this.updateProgressBar(),this.onAfterTranslate(e),this.translateStringEle.length>t+1&&await this.stringTranslation(this.completedTranslateIndex+1),t===this.translateStringEle.length-1&&(this.translateBtn.prop("disabled",!0),this.onComplete({characterCount:this.completedCharacterCount}),jQuery(this.progressBarSelector).find(".chrome-ai-translator-strings-count").show().find(".totalChars").text(this.completedCharacterCount))};stringTranslationBatch=async(t,e)=>{const a=await this.translator.translate(t[e].nodeValue);return a&&""!==a&&(t[e].nodeValue=a),e<t.length-1&&await this.stringTranslationBatch(t,e+1),!0};addProgressBar=()=>{if(!document.querySelector("#chrome-ai-translator-modal .chrome-ai-translator_progress_bar")){const t=jQuery('\n                <div class="chrome-ai-translator_progress_bar" style="background-color: #f3f3f3;border-radius: 10px;overflow: hidden;margin: 1.5rem auto; width: 50%;">\n                <div class="chrome-ai-translator_progress" style="overflow: hidden;transition: width .5s ease-in-out; border-radius: 10px;text-align: center;width: 0%;height: 20px;box-sizing: border-box;background-color: #4caf50; color: #fff; font-weight: 600;"></div>\n                </div>\n                <div style="display:none; color: white;" class="chrome-ai-translator-strings-count hidden">\n                    Wahooo! You have saved your valuable time via auto translating \n                    <strong class="totalChars">0</strong> characters using \n                    <strong>\n                        Chrome AI Translator\n                    </strong>\n                </div>\n            ');jQuery(this.progressBarSelector).append(t)}};updateProgressBar=()=>{const t=this.completedCharacterCount/this.totalStringCount*1e3/10;let e=t.toString().split(".")[1]||"";e=e.length>0&&"0"!==e[0]?e[0]:"";const a=parseInt(t)+""+(""!==e?"."+e:"");jQuery(".chrome-ai-translator_progress").css({width:`${a}%`}).text(`${a}%`)};stopTranslation=()=>{this.translateStatus=!1};reInit=()=>{this.translateBtnEvents()};startTranslation=()=>{this.translateStatus=!0,this.startTranslationProcess(this.completedTranslateIndex+1)}}const y=_,f=window.wp.i18n,{dispatch:b}=wp.data,v={yandex:t=>{const e=window;h(e,e.document,e.navigator,{pageLang:t.sourceLang,autoMode:"false",widgetId:"atfp_yandex_translate_element",widgetTheme:"light"},e.yt=e.yt||{},t.targetLang,t.translateStatus)},localAiTranslator:async t=>{const e=atfp_ajax_object.languageObject[t.targetLang];let a=!1,n=0,r=0;const s=await y.Object({mainWrapperSelector:"#atfp_strings_model",btnSelector:`#${t.ID}`,btnClass:"local_ai_translator_btn",btnText:(0,f.__)("Translate To","automatic-translations-for-polylang")+" "+e+" (Beta)",stringSelector:".atfp_string_container tbody tr td.translate:not([data-translate-status='translated'])",progressBarSelector:"#atfp_strings_model .atfp_translate_progress",sourceLanguage:t.sourceLang,targetLanguage:t.targetLang,targetLanguageLabel:e,onStartTranslationProcess:()=>{0!==n&&(r=(new Date).getTime()-n),n=(new Date).getTime(),jQuery("#atfp_strings_model .modal-content .atfp_string_container")[0].scrollHeight>100&&jQuery("#atfp_strings_model .atfp_translate_progress").fadeIn("slow")},onComplete:()=>{setTimeout((()=>{t.translateStatus(),t.totalTimeTakenHandler(r),jQuery("#atfp_strings_model .atfp_translate_progress").fadeOut("slow")}),4e3)},onBeforeTranslate:t=>{const e=jQuery("#atfp_strings_model .modal-content .atfp_string_container");if(e.length<1)return void s.stopTranslation();const a=e[0].getBoundingClientRect(),n=t.closest("tr").offsetTop,r=e.height();var o;n>r+a.y&&(o=n-r+t.offsetHeight,e.scrollTop(o))},onAfterTranslate:t=>{const e=t.innerText,a=t.dataset.stringType,n=t.dataset.key,r=t.closest("tr").querySelector('td[data-source="source_text"]').innerText;u({type:a,key:n,translateContent:e,source:r,provider:"localAiTranslator"})}});s.hasOwnProperty("init")&&(!0,s.init())}},S=i.createContext({});function T({baseColor:t,highlightColor:e,width:a,height:n,borderRadius:r,circle:s,direction:o,duration:l,enableAnimation:i=!0,customHighlightBackground:c}){const d={};return"rtl"===o&&(d["--animation-direction"]="reverse"),"number"==typeof l&&(d["--animation-duration"]=`${l}s`),i||(d["--pseudo-element-display"]="none"),"string"!=typeof a&&"number"!=typeof a||(d.width=a),"string"!=typeof n&&"number"!=typeof n||(d.height=n),"string"!=typeof r&&"number"!=typeof r||(d.borderRadius=r),s&&(d.borderRadius="50%"),void 0!==t&&(d["--base-color"]=t),void 0!==e&&(d["--highlight-color"]=e),"string"==typeof c&&(d["--custom-highlight-background"]=c),d}function w({count:t=1,wrapper:e,className:a,containerClassName:n,containerTestId:r,circle:s=!1,style:o,...l}){var c,d,p;const u=i.useContext(S),g={...l};for(const[t,e]of Object.entries(l))void 0===e&&delete g[t];const m={...u,...g,circle:s},h={...o,...T(m)};let _="react-loading-skeleton";a&&(_+=` ${a}`);const y=null!==(c=m.inline)&&void 0!==c&&c,f=[],b=Math.ceil(t);for(let e=0;e<b;e++){let a=h;if(b>t&&e===b-1){const e=null!==(d=a.width)&&void 0!==d?d:"100%",n=t%1,r="number"==typeof e?e*n:`calc(${e} * ${n})`;a={...a,width:r}}const n=i.createElement("span",{className:_,style:a,key:e},"‌");y?f.push(n):f.push(i.createElement(i.Fragment,{key:e},n,i.createElement("br",null)))}return i.createElement("span",{className:n,"data-testid":r,"aria-live":"polite","aria-busy":null===(p=m.enableAnimation)||void 0===p||p},e?f.map(((t,a)=>i.createElement(e,{key:a},t))):f)}const{__:k}=wp.i18n,{select:E}=wp.data,{Fragment:R}=wp.element,x=t=>{const{service:e,serviceLabel:a}=t,[n,r]=(0,i.useState)(!1),s=E("block-atfp/translate").getTranslationEntry();let o=0,l=0;const d=e=>{if(Object.getPrototypeOf(e)===Object.prototype&&!0===e.stringRenderComplete)return void t.stringCountHandler(o,l);let a=e.join(" ");if(void 0===a||""===a.trim())return;a=a.replace(/#atfp_open_translate_span#(.*?)#atfp_close_translate_span#/g,"");const n=a.trim().split(/\s+/).filter((t=>/[^\p{L}\p{N}]/.test(t))).length,r=a.length;o+=n,l+=r};return(0,i.useEffect)((()=>{"yandex"===t.service&&(document.documentElement.setAttribute("translate","no"),document.body.classList.add("notranslate"));const e=t.service,a=`atfp_${e}_translate_element`;wp.data.select("block-atfp/translate").getTranslationEntry().length>0&&t.postDataFetchStatus&&v[e]({sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatus:t.translateStatusHandler,ID:a,totalTimeTakenHandler:t.totalTimeTakenHandler,totalTimeTaken:t.totalTimeTaken})}),[t.modalRender,t.postDataFetchStatus]),React.createElement("div",{className:"modal-body"},s.length>0&&t.postDataFetchStatus?React.createElement(React.Fragment,null,React.createElement("div",{className:"atfp_translate_progress",key:t.modalRender},k("Automatic translation is in progress....","automatic-translations-for-polylang"),React.createElement("br",null),k("It will take few minutes, enjoy ☕ coffee in this time!","automatic-translations-for-polylang"),React.createElement("br",null),React.createElement("br",null),k("Please do not leave this window or browser tab while translation is in progress...","automatic-translations-for-polylang")),React.createElement("div",{className:`translator-widget ${e}`,style:{display:"localAiTranslator"===t.service?"flex":"block"}},"localAiTranslator"===t.service?React.createElement("h3",{className:"choose-lang"},k("Translate Using Chrome built-in API","automatic-translations-for-polylang")," ",React.createElement("span",{className:"dashicons-before dashicons-translation"})):React.createElement("h3",{className:"choose-lang"},k("Choose language","automatic-translations-for-polylang")," ",React.createElement("span",{className:"dashicons-before dashicons-translation"})),React.createElement("div",{className:"atfp_translate_element_wrapper"},React.createElement("div",{id:"atfp_yandex_translate_element",style:{display:"yandex"===e?"block":"none"}}),React.createElement("div",{id:"atfp_localAiTranslator_translate_element",style:{display:"localAiTranslator"===e?"block":"none"}}))),React.createElement("div",{className:"atfp_string_container"},React.createElement("table",{className:"scrolldown",id:"stringTemplate"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"notranslate"},k("S.No","automatic-translations-for-polylang")),React.createElement("th",{className:"notranslate"},k("Source Text","automatic-translations-for-polylang")),React.createElement("th",{className:"notranslate"},k("Translation","automatic-translations-for-polylang")))),React.createElement("tbody",null,t.postDataFetchStatus&&React.createElement(React.Fragment,null,s.map(((e,a)=>React.createElement(R,{key:a},void 0!==e.source&&""!==e.source.trim()&&React.createElement(React.Fragment,null,React.createElement("tr",null,React.createElement("td",null,a+1),React.createElement("td",{"data-source":"source_text"},e.source),e.translatedData[t.service]?React.createElement("td",{className:"translate","data-translate-status":"translated","data-key":e.id,"data-string-type":e.type},e.translatedData[t.service]):React.createElement("td",{className:"translate",translate:"yes","data-key":e.id,"data-string-type":e.type},React.createElement(c,{service:t.service,content:e.source,translateContent:d,totalString:350,currentIndex:a+1,contentKey:e.id})))))))))))):t.postDataFetchStatus?React.createElement("p",null,k("No strings are available for translation","automatic-translations-for-polylang")):React.createElement(w,{count:1,height:"150px",width:"100%",className:"react-loading-skeleton-atfp"}))},L=t=>React.createElement("div",{className:`notice inline notice-info is-dismissible ${t.className}`},Array.isArray(t.children)?t.children.join(" "):t.children),{sprintf:j,__:C}=wp.i18n,A=t=>React.createElement("div",{className:"modal-footer",key:t.modalRender},!t.translateStatus&&t.stringCount&&React.createElement(L,{className:"atfp_string_count"},j(C("Automated translation complete: %s words translated, saving valuable time and resources.","automatic-translations-for-polylang"),t.stringCount)),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translateStatus,onClick:t.updatePostData},C("Update Content","automatic-translations-for-polylang"))));function P(){return P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},P.apply(null,arguments)}const N=t=>{const[e,a]=(0,o.useState)(!0),[n,r]=(0,o.useState)(""),[s,i]=(0,o.useState)(!0),[c,d]=(0,o.useState)(!1),[p,u]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1);(0,o.useEffect)((()=>{t.postDataFetchStatus||"gutenberg"===atfp_ajax_object.editor_type&&Object.keys(t.blockRules).length>0&&t.fetchPostData({blockRules:t.blockRules,postId:t.postId,sourceLang:t.sourceLang,targetLang:t.targetLang,updatePostDataFetch:t.updatePostDataFetch,refPostData:t=>r(t)})}),[t.postDataFetchStatus,t.blockRules,t.modalRender]);const h=e=>{"yandex"===t.service&&document.querySelector("#atfp_yandex_translate_element #yt-widget .yt-button__icon.yt-button__icon_type_right")?.click(),i(!0),a(!1)},_=()=>{const e=n,r=t.blockRules;t.translatePost({postContent:e,modalClose:()=>a(!1),blockRules:r,service:t.service,blockRules:r}),t.pageTranslate(!0)};return(0,o.useEffect)((()=>{a(!0),setTimeout((()=>{const t=document.querySelector(".atfp_string_container");t&&(t.scrollTop=0)}))}),[t.modalRender]),React.createElement(React.Fragment,null," ",e&&React.createElement("div",{id:`atfp-${t.service}-strings-modal`,className:"modal-container",style:{display:e?"flex":"none"}},React.createElement("div",{className:"modal-content"},React.createElement(l,{modalRender:t.modalRender,setPopupVisibility:h,postContent:n,blockRules:t.blockRules,translateStatus:s,pageTranslate:t.pageTranslate,stringCount:c,characterCount:p,totalTimeTaken:g,service:t.service,updatePostData:_}),React.createElement(x,P({},t,{updatePostContent:t=>{r(t)},blockRules:t.blockRules,stringCountHandler:(t,a)=>{e&&(d(t),u(a))},totalTimeTakenHandler:t=>{e&&m(t)},contentLoading:t.contentLoading,postDataFetchStatus:t.postDataFetchStatus,service:t.service,sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatusHandler:()=>{i(!1)},modalRender:t.modalRender})),React.createElement(A,{modalRender:t.modalRender,setPopupVisibility:h,postContent:n,blockRules:t.blockRules,translateStatus:s,pageTranslate:t.pageTranslate,stringCount:c,characterCount:p,totalTimeTaken:g,service:t.service,updatePostData:_}))))},{sprintf:D,__:F}=wp.i18n,B=t=>{const[e,a]=(0,o.useState)({}),[n,r]=(0,o.useState)({}),[l,i]=(0,o.useState)(0),[c,d]=(0,o.useState)(!1),p=atfp_ajax_object.source_lang,u=t.targetLang,g=atfp_ajax_object.languageObject[p],m=atfp_ajax_object.languageObject[u],h=atfp_ajax_object.ajax_url,_=atfp_ajax_object.atfp_url+"assets/images/",f=["af","am","ar","az","ba","be","bg","bn","bs","ca","ceb","cs","cv","cy","da","de","el","emj","en","eo","es","et","eu","fa","fi","fr","ga","gd","gl","gu","he","hi","hr","ht","hu","hy","id","is","it","ja","jv","ka","kazlat","kk","km","kn","ko","ky","la","lb","lo","lt","lv","mg","mhr","mi","mk","ml","mn","mr","mrj","ms","mt","my","ne","nl","no","pa","pap","pl","pt","pt-BR","ro","ru","sah","si","sk","sl","sq","sr","sr-Latn","su","sv","sw","ta","te","tg","th","tl","tr","tt","udm","uk","ur","uz","uzbcyr","vi","xh","yi","zh","zu"].includes(u),b={atfp_nonce:atfp_ajax_object.ajax_nonce,action:atfp_ajax_object.action_block_rules},v=t=>{t.preventDefault();const e=t.target;"yes"===e.dataset.value&&d(!0),e.closest("#atfp-modal-open-warning-wrapper").remove()};(0,o.useEffect)((()=>{const t=document.querySelectorAll("#atfp-modal-open-warning-wrapper .modal-content button"),e=document.querySelector('input#atfp-translate-button[name="atfp_meta_box_translate"]');e&&e.addEventListener("click",(()=>{d((t=>!t))})),t.forEach((t=>{t&&t.addEventListener("click",v)}))}),[]),(0,o.useEffect)((()=>{(async()=>{const t=await y.languageSupportedStatus(p,u,m),e=document.querySelector(".atfp-service-btn#local_ai_translator_btn");!0!==t&&"object"==typeof t&&e&&(e.disabled=!0,jQuery(e).after(t))})()}),[c]),(0,o.useEffect)((()=>{const a=e,r=a.dataset&&a.dataset.service,o=a.dataset&&a.dataset.serviceLabel,i=t.postId,c=document.getElementById("atfp_strings_model");c&&(c._reactRoot||(c._reactRoot=s.createRoot(c)),l&&c._reactRoot.render(React.createElement(N,{blockRules:n,postId:i,service:r,serviceLabel:o,sourceLang:p,targetLang:u,modalRender:l,pageTranslate:t.pageTranslate,postDataFetchStatus:t.postDataFetchStatus,fetchPostData:t.fetchPostData,translatePost:t.translatePost,contentLoading:t.contentLoading,updatePostDataFetch:t.updatePostDataFetch})))}),[t.postDataFetchStatus,n,l]);const S=async e=>{let s=e.target.classList.contains("atfp-service-btn")?e.target:e.target.closest(".atfp-service-btn");const o=s.dataset&&s.dataset.service;if(d(!1),"localAiTranslator"===o){const t=await y.languageSupportedStatus(p,u,m);if(!0!==t&&"object"==typeof t)return}i((t=>t+1)),a(s),Object.keys(n).length>0||t.postDataFetchStatus||fetch(h,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(b)}).then((t=>t.json())).then((t=>{const e=JSON.parse(t.data.blockRules);r(e)})).catch((t=>{console.error("Error fetching post content:",t)}))};return React.createElement(React.Fragment,null,c&&React.createElement("div",{className:"modal-container",style:{display:c?"flex":"none"}},React.createElement("div",{className:"atfp-settings modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("h2",null,F("Step 1 - Select Translation Provider","automatic-translations-for-polylang")),React.createElement("h4",null,D(F("Translate %(postType)s content from %(source)s to %(target)s","automatic-translations-for-polylang"),{postType:t.postType,source:g,target:m})),React.createElement("p",{className:"atfp-error-message",style:{marginBottom:".5rem"}},D(F("This translation widget replaces the current %(postType)s content with the original %(source)s %(postType)s and translates it into %(target)s","automatic-translations-for-polylang"),{postType:t.postType,source:g,target:m})),React.createElement("span",{className:"close",onClick:()=>d(!1)},"×")),React.createElement("hr",null),React.createElement("strong",{className:"atlt-heading"},F("Translate Using Yandex Page Translate Widget","automatic-translations-for-polylang")),React.createElement("div",{className:"inputGroup"},f?React.createElement(React.Fragment,null,React.createElement("button",{className:"atfp-service-btn translate button button-primary","data-service":"yandex","data-service-label":"Yandex Translate",onClick:S},F("Yandex Translate","automatic-translations-for-polylang")),React.createElement("br",null)):React.createElement(React.Fragment,null,React.createElement("button",{className:"atfp-service-btn translate button button-primary",disabled:!0},F("Yandex Translate","automatic-translations-for-polylang")),React.createElement("br",null),React.createElement("span",{className:"atfp-error-message"},m," ",F("language is not supported by Yandex Translate","automatic-translations-for-polylang"),".")),React.createElement("a",{href:"https://translate.yandex.com/",target:"_blank"},React.createElement("img",{className:"pro-features-img",src:`${_}powered-by-yandex.png`,alt:"powered by Yandex Translate Widget"}))),React.createElement("hr",null),React.createElement("ul",{style:{margin:"0"}},React.createElement("li",null,React.createElement("span",{style:{color:"green"}},"✔")," ",F("Unlimited Translations with Yandex Translate","automatic-translations-for-polylang")),React.createElement("li",null,React.createElement("span",{style:{color:"green"}},"✔")," ",F("No API Key Required for Yandex Translate","automatic-translations-for-polylang")),React.createElement("li",null,React.createElement("span",{style:{color:"green"}},"✔")," ",F("Supports Multiple Languages","automatic-translations-for-polylang")," - ",React.createElement("a",{href:"https://yandex.com/support2/translate-desktop/en/supported-langs",target:"_blank"},F("See Supported Languages","automatic-translations-for-polylang")))),React.createElement("hr",null),React.createElement("strong",{className:"atlt-heading"},F("Translate Using Chrome Built-in API","automatic-translations-for-polylang")),React.createElement("div",{className:"inputGroup"},React.createElement("button",{id:"local_ai_translator_btn",className:"atfp-service-btn button button-primary","data-service":"localAiTranslator","data-service-label":"Chrome Built-in API",onClick:S},F("Chrome AI Translator (Beta)","automatic-translations-for-polylang")),React.createElement("br",null),React.createElement("a",{href:"https://developer.chrome.com/docs/ai/translator-api",target:"_blank"},"Powered by ",React.createElement("img",{className:"pro-features-img",src:`${_}chrome-ai-translator.png`,alt:"powered by Chrome built-in API"})," Built-in API")),React.createElement("hr",null),React.createElement("div",{className:"modal-footer"},React.createElement("button",{className:"atfp-setting-close",onClick:()=>d(!1)},F("Close","automatic-translations-for-polylang"))))))},O="SAVE_SOURCE_TITLE",I="SAVE_TRANSLATE_TITLE",H="SAVE_SOURCE_EXCERPT",M="SAVE_TRANSLATE_EXCERPT",$="SAVE_SOURCE_CONTENT",q="SAVE_TRANSLATE_CONTENT",V="SAVE_SOURCE_META_FIELDS",Q="SAVE_TRANSLATE_META_FIELDS",U={title:{},excerpt:{},content:[],metaFields:{}},z=t=>({type:O,text:t}),W=(t,e)=>({type:I,text:t,provider:e}),Y=t=>({type:H,text:t}),X=(t,e)=>({type:M,text:t,provider:e}),K=(t,e)=>({type:$,text:e,id:t}),G=(t,e,a,n)=>({type:q,text:e,id:t,source:a,provider:n}),J=(t,e)=>({type:V,text:e,id:t}),Z=(t,e,a,n)=>({type:Q,text:e,id:t,source:a,provider:n}),tt=t=>{const e=new Array;return t.title.source&&e.push({id:"title",source:t.title.source,type:"title",translatedData:t.title.translatedData||{}}),t.excerpt.source&&e.push({id:"excerpt",source:t.excerpt.source,type:"excerpt",translatedData:t.excerpt.translatedData||{}}),Object.keys(t.metaFields).map((a=>{e.push({type:"metaFields",id:a,source:t.metaFields[a].source,translatedData:t.metaFields[a].translatedData||{}})})),Object.keys(t.content).map((a=>{e.push({type:"content",id:a,source:t.content[a].source,translatedData:t.content[a].translatedData||{}})})),e},et=(t,e,a,n=null,r=null)=>["title","excerpt"].includes(e)&&t[e].source===a&&t[e].translatedData&&t[e].translatedData[r]?t[e]?.translatedData[r]||t[e]?.source:"metaFields"===e&&t.metaFields&&t.metaFields[n]&&t.metaFields[n].source===a&&t.metaFields[n].translatedData&&t.metaFields[n].translatedData[r]?void 0!==t.metaFields[n]?.translatedData[r]?t.metaFields[n]?.translatedData[r]:t.metaFields[n]?.source:"content"===e&&t.content&&t.content[n]&&t.content[n].source===a&&t.content[n].translatedData&&t.content[n].translatedData[r]?void 0!==t.content[n]?.translatedData[r]?t.content[n]?.translatedData[r]:t.content[n]?.source:a,{createReduxStore:at,register:nt}=wp.data;nt(at("block-atfp/translate",{reducer:(t=U,e)=>{switch(e.type){case O:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,title:{...t.title,source:e.text}}:t;case I:return{...t,title:{...t.title,translatedData:{...t.title.translatedData||[],[e.provider]:e.text}}};case H:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,excerpt:{...t.excerpt,source:e.text}}:t;case M:return{...t,excerpt:{...t.excerpt,translatedData:{...t.excerpt.translatedData||[],[e.provider]:e.text}}};case $:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],source:e.text}}}:t;case q:return t.content[e.id].source===e.source?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],translatedData:{...t.content[e.id].translatedData||[],[e.provider]:e.text}}}}:t;case V:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],source:e.text}}}:t;case Q:return{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],translatedData:{...t.metaFields[e.id].translatedData||[],[e.provider]:e.text}}}};default:return t}},actions:n,selectors:r}));const rt=(t,e,a,n)=>{const r=(t,e)=>{Object.keys(e).map((a=>{let r=e;r=r[a];const s=new Array(...t,a);n(s,r)}))};Object.getPrototypeOf(e)===Array.prototype?((t,e)=>{const s=new Array(...t);let o=a;s.forEach((t=>{o=o[t]})),[null,void 0].includes(o)||(Object.getPrototypeOf(o)!==Object.prototype?(Object.getPrototypeOf(o)===Array.prototype&&o.forEach(((t,a)=>{const r=new Array;s.forEach((t=>{r.push(t)})),r.push(a),n(r,e[0])})),"object"!=typeof o||r(t,e[0])):r(t,e[0]))})(t,e):Object.getPrototypeOf(e)===Object.prototype&&r(t,e)},{dispatch:st}=wp.data,ot=(t,e)=>{Object.keys(e.AtfpBlockParseRules).includes(t.name)&&((t,e,a)=>{const n=Object.values(a),r=(a,n)=>{if(!0!==n)rt(a,n,e,r);else{const n=new Array(...a),r=new Array;let s=e,o=t;n.forEach((t=>{r.push(t),o+=`atfp${t}`,s=s[t]}));let l=s;if(l instanceof wp.richText.RichTextData&&(l=l.originalHTML),void 0!==l&&""!==l.trim()){let t=o.replace(/[^\p{L}\p{N}]/gu,"");if(!/[\p{L}\p{N}]/gu.test(l))return!1;st("block-atfp/translate").contentSaveSource(t,l)}}};n.forEach((t=>{Object.keys(t).forEach((e=>{const a=new Array(e);r(a,t[e])}))}))})(t.clientId,t.attributes,e.AtfpBlockParseRules[t.name])},lt=(t,e)=>{t.forEach((t=>{ot(t,e),t.innerBlocks&&lt(t.innerBlocks,e)}))},{__:it}=wp.i18n,{parse:ct}=wp.blocks,dt=async t=>{const e=t.blockRules,a=atfp_ajax_object.ajax_url,n={postId:parseInt(t.postId),local:t.targetLang,current_local:t.sourceLang,atfp_nonce:atfp_ajax_object.ajax_nonce,action:atfp_ajax_object.action_fetch};fetch(a,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(n)}).then((t=>t.json())).then((a=>{const n=a.data;n.content&&""!==n.content.trim()&&(n.content=ct(n.content)),((t,e)=>{Object.keys(t).forEach((a=>{if("content"===a)((t,e)=>{Object.values(t).forEach((t=>{ot(t,e),t.innerBlocks&&lt(t.innerBlocks,e)}))})(t[a],e);else if("metaFields"===a)Object.keys(t[a]).forEach((e=>{Object.keys(d).includes(e)&&"string"===d[e].type&&""!==t[a][e][0]&&void 0!==t[a][e][0]&&st("block-atfp/translate").metaFieldsSaveSource(e,t[a][e][0])}));else if(["title","excerpt"].includes(a)&&t[a]&&""!==t[a].trim()){const e=`${a}SaveSource`;st("block-atfp/translate")[e](t[a])}}))})(n,e),t.refPostData(n),t.updatePostDataFetch(!0)})).catch((t=>{console.error("Error fetching post content:",t)}))},{createBlock:pt}=wp.blocks,{dispatch:ut,select:gt}=wp.data,mt=(t,e,a,n)=>{const{name:r,attributes:s}=t;let o={...s},l=t,i="";return Object.keys(a.AtfpBlockParseRules).includes(t.name)&&(l=((t,e,a)=>{const n=Object.values(e),r=t.attributes,s=t.clientId,o=(e,n)=>{if(!0!==n)rt(e,n,r,o);else{const n=new Array(...e),o=new Array;let l=r,i=s;n.forEach((t=>{o.push(t),i+=`atfp${t}`,l=l[t]}));let c=l;if(c instanceof wp.richText.RichTextData&&(c=c.originalHTML),void 0!==c&&""!==c.trim()){let e=i.replace(/[^\p{L}\p{N}]/gu,""),r="";r=/[\p{L}\p{N}]/gu.test(c)?gt("block-atfp/translate").getTranslatedString("content",c,e,a):c,t.attributes=((t,e,a)=>{const n={...t};let r=n;for(let t=0;t<e.length-1;t++)Object.getPrototypeOf(r[e[t]])===Array.prototype?r[e[t]]=[...r[e[t]]]:r[e[t]]={...r[e[t]]},r=r[e[t]];return r[e[e.length-1]]instanceof wp.richText.RichTextData?r[e[e.length-1]]=a.replace(/(?<!\\)"|\\"/g,"'"):r[e[e.length-1]]=a,n})(t.attributes,n,r)}}};return n.forEach((t=>{Object.keys(t).forEach((e=>{const a=new Array(e);o(a,t[e])}))})),t})(t,a.AtfpBlockParseRules[t.name],n),o=l.attributes),i=pt(r,o,e),i},ht=(t,e,a)=>{let n=t.innerBlocks.map((t=>{if(t.name)return ht(t,e,a)}));return mt(t,n,e,a)},_t=window.wp.data,yt=t=>{const{editPost:e}=(0,_t.dispatch)("core/editor"),{modalClose:a,postContent:n,service:r}=t;(()=>{const t={};Object.keys(n).filter((t=>["title","excerpt"].includes(t))).forEach((e=>{const a=n[e];if(""!==a.trim()){const n=(0,_t.select)("block-atfp/translate").getTranslatedString(e,a,null,r);t[e]=n}})),e(t)})(),(()=>{const t=n.metaFields;Object.keys(t).forEach((a=>{if(Object.keys(d).includes(a)&&"string"===d[a].type){const n=(0,_t.select)("block-atfp/translate").getTranslatedString("metaFields",t[a][0],a,r);a.startsWith("_yoast_wpseo_")?(t=>{if(!(0,_t.dispatch)("yoast-seo/editor"))return;const{updateData:e,setFocusKeyword:a,setBreadcrumbsTitle:n,setFacebookPreviewTitle:r,setFacebookPreviewDescription:s,setTwitterPreviewTitle:o,setTwitterPreviewDescription:l}=(0,_t.dispatch)("yoast-seo/editor"),{key:i,value:c}=t;switch(i){case"_yoast_wpseo_focuskw":a&&a(c);break;case"_yoast_wpseo_title":e&&e({title:c});break;case"_yoast_wpseo_metadesc":e&&e({description:c});break;case"_yoast_wpseo_bctitle":n&&n(c);break;case"_yoast_wpseo_opengraph-title":r&&r(c);break;case"_yoast_wpseo_opengraph-description":s&&s(c);break;case"_yoast_wpseo_twitter-title":o&&o(c);break;case"_yoast_wpseo_twitter-description":l&&l(c)}})({key:a,value:n}):a.startsWith("rank_math_")?(t=>{if(!(0,_t.dispatch)("rank-math"))return;const{updateKeywords:e,updateTitle:a,updateDescription:n,updateBreadcrumbTitle:r,updateFacebookTitle:s,updateFacebookDescription:o,updateTwitterTitle:l,updateTwitterDescription:i}=(0,_t.dispatch)("rank-math"),{key:c,value:d}=t;switch(c){case"rank_math_focus_keyword":e&&e(d);break;case"rank_math_title":a&&a(d);break;case"rank_math_description":n&&n(d);break;case"rank_math_breadcrumb_title":r&&r(d);break;case"rank_math_facebook_title":s&&s(d);break;case"rank_math_facebook_description":o&&o(d);break;case"rank_math_twitter_title":l&&l(d);break;case"rank_math_twitter_description":i&&i(d)}})({key:a,value:n}):a.startsWith("_seopress_")?(async t=>{const{key:e,value:a}=t,n=e.replace(/^_/,"")+"_meta";if(document.querySelector("#"+n))switch(e){case"_seopress_titles_title":case"_seopress_titles_desc":case"_seopress_social_fb_title":case"_seopress_social_fb_desc":case"_seopress_social_twitter_title":case"_seopress_social_twitter_desc":jQuery(`#${n}`).val(a),jQuery(`#${n}`).trigger("change");break;case"_seopress_analysis_target_kw":window.target_kw&&window.target_kw instanceof window.Tagify&&window.target_kw.DOM.originalInput.id===n?window.target_kw.addTags(a):(jQuery("#"+n).val(a),jQuery("#"+n).trigger("change"))}})({key:a,value:n}):e({meta:{[a]:n}})}}))})(),(()=>{const e=n.content;e.length<=0||Object.values(e).forEach((e=>{((t,e,a)=>{const{name:n}=t;if(n){let n=t.innerBlocks.map((t=>{if(t.name)return ht(t,e,a)}));const r=mt(t,n,e,a);ut("core/block-editor").insertBlock(r)}})(e,t.blockRules,r)}))})(),a()},ft=()=>{const[t,e]=(0,i.useState)(!1),a=new URLSearchParams(window.location.search),n=a.get("new_lang"),r=a.get("from_post"),s=a.get("post_type"),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!0),p=dt,u=yt;return(0,i.useEffect)((()=>{if(t){const t=document.querySelector('input#atfp-translate-button[name="atfp_meta_box_translate"]');t&&(t.disabled=!0)}}),[t]),React.createElement(React.Fragment,null,!t&&React.createElement(B,{contentLoading:c,updatePostDataFetch:t=>{l(t),d(!1)},postDataFetchStatus:o,pageTranslate:t=>{e(t)},postId:r,targetLang:n,postType:s,fetchPostData:p,translatePost:u}))};window.addEventListener("load",(()=>{(()=>{let t=new Array;t.push('\x3c!-- The Modal --\x3e<div id="atfp-setting-modal"></div>','<div id="atfp_strings_model" class="modal atfp_custom_model"></div>'),t.forEach((t=>{document.body.insertAdjacentHTML("beforeend",t)}))})(),(()=>{const t=document.getElementById("atfp-setting-modal"),e=(()=>{const t=new URLSearchParams(window.location.search),e=t.get("post_type"),a=t.get("new_lang"),n=atfp_ajax_object.languageObject[a],r=document.createElement("div");return r.id="atfp-modal-open-warning-wrapper",r.innerHTML=`\n    <div class="modal-container" style="display: flex">\n      <div class="modal-content">\n        <p>Would you like to duplicate your original ${e} content and have it automatically translated into ${n}?</p>\n        <div>\n          <button data-value="yes">Yes</button>\n          <button data-value="no">No</button>\n        </div>\n      </div>\n    </div>`,r})();document.body.insertBefore(e,t)})(),wp.element.render(React.createElement(ft,null),document.getElementById("atfp-setting-modal"))}))})();