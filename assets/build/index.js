(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{contentSaveSource:()=>J,contentSaveTranslate:()=>K,excerptSaveSource:()=>X,excerptSaveTranslate:()=>Y,titleSaveSource:()=>G,titleSaveTranslate:()=>W});var a={};t.r(a),t.d(a,{getTranslatedString:()=>Z,getTranslationEntry:()=>z});const n=window.ReactDOM;var o=t.n(n);const r=window.wp.element,{createBlock:s}=wp.blocks,{dispatch:l,select:c}=wp.data,i=(t,e,a)=>{const{name:n,attributes:o}=t;let r={...o},l=t,i="";return Object.keys(a.AtfpBlockParseRules).includes(t.name)&&(l=((t,e,a)=>{const n=Object.values(e),o=t.attributes,r=t.clientId,s=(e,n)=>{if(!0===n){const n=new Array(...e),s=new Array;let l=o,i=r;n.forEach((t=>{s.push(t),i+=`atfp${t}`,l=l[t]}));const u=l;if(void 0!==u&&""!==u.trim()){let e=i.replace(/[^\p{L}\p{N}]/gu,""),o="";o=/[^\p{L}]/gu.test(u)?c("block-atfp/translate").getTranslatedString("content",u,e):u,t.attributes=((e,n,o)=>{const r=Object.keys(a),s=n.slice(-2).join("_");let l=!1;r.includes(s)&&a[s].includes(t.name)&&(n.pop(),l=!0);const c={...e};let i=c;for(let t=0;t<n.length-1;t++)Object.getPrototypeOf(i[n[t]])===Array.prototype?i[n[t]]=[...i[n[t]]]:i[n[t]]={...i[n[t]]},i=i[n[t]];return i[n[n.length-1]]=l?o.replace(/(?<!\\)"|\\"/g,"'"):o,c})(t.attributes,n,o)}}Object.getPrototypeOf(n)===Array.prototype?i(e,n):Object.getPrototypeOf(n)===Object.prototype&&l(e,n)},l=(t,e)=>{Object.keys(e).map((a=>{let n=e;n=n[a];const o=new Array(...t,a);s(o,n)}))},i=(t,e)=>{const a=new Array(...t);let n=o;a.forEach((t=>{n=n[t]})),Object.getPrototypeOf(n)!==Object.prototype?n.forEach(((t,n)=>{const o=new Array;a.forEach((t=>{o.push(t)})),o.push(n),s(o,e[0])})):l(t,e[0])};return n.forEach((t=>{Object.keys(t).forEach((e=>{const a=new Array(e);s(a,t[e])}))})),t})(t,a.AtfpBlockParseRules[t.name],a.AtfpCoreAttrReplace),r=l.attributes),i=s(n,r,e),i},u=(t,e)=>{let a=t.innerBlocks.map((t=>{if(t.name)return u(t,e)}));return i(t,a,e)},p=window.wp.data,d=t=>{const{editPost:e}=(0,p.dispatch)("core/editor"),{modalClose:a,postContent:n}=t;(()=>{const t={};Object.keys(n).filter((t=>"content"!==t)).forEach((e=>{const a=n[e];if(""!==a.trim()){const n=(0,p.select)("block-atfp/translate").getTranslatedString(e,a);t[e]=n}})),e(t)})(),(()=>{const e=n.content;e.length<=0||Object.values(e).forEach((e=>{((t,e)=>{const{name:a}=t;if(a){let a=t.innerBlocks.map((t=>{if(t.name)return u(t,e)}));const n=i(t,a,e);l("core/block-editor").insertBlock(n)}})(e,t.blockRules)}))})(),a()},{__}=wp.i18n,m=t=>{const e=()=>{t.setPopupVisibility(!1)};return React.createElement("div",{className:"modal-header",key:t.modalRender},React.createElement("span",{className:"close",onClick:e},"×"),React.createElement("h2",{className:"notranslate"},__("Step 2 - Start Automatic Translation Process (Beta)","automatic-translation-for-polylang")),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translateStatus,onClick:()=>{const a=t.postContent,n=t.blockRules;d({postContent:a,modalClose:e,blockRules:n}),t.pageTranslate(!0)}},__("Save Translation","automatic-translation-for-polylang"))),React.createElement("div",{style:{display:"none"},className:"ytstats hidden"},__("Wahooo! You have saved your valuable time via auto translating","automatic-translation-for-polylang"),React.createElement("strong",{className:"totalChars"}," ")," ",__("characters using","automatic-translation-for-polylang"),React.createElement("strong",null,React.createElement("a",{href:"https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post",target:"_new"},__("Loco Automatic Translate Addon","automatic-translation-for-polylang")))))},g=window.React,{dispatch:f}=wp.data;let y=0;const h=(t,e)=>{Object.keys(e.AtfpBlockParseRules).includes(t.name)&&((t,e,a)=>{const n=Object.values(a),o=(a,n)=>{if(!0===n){const n=new Array(...a),o=new Array;let r=e,s=t;n.forEach((t=>{o.push(t),s+=`atfp${t}`,r=r[t]}));const l=r;if(void 0!==l&&""!==l.trim()){let t=s.replace(/[^\p{L}\p{N}]/gu,"");if(!/[^\p{L}]/gu.test(l))return!1;f("block-atfp/translate").contentSaveSource(t,l,y),y++}}Object.getPrototypeOf(n)===Array.prototype?s(a,n):Object.getPrototypeOf(n)===Object.prototype&&r(a,n)},r=(t,e)=>{Object.keys(e).map((a=>{let n=e;n=n[a];const r=new Array(...t,a);o(r,n)}))},s=(t,a)=>{const n=new Array(...t);let s=e;n.forEach((t=>{s=s[t]})),Object.getPrototypeOf(s)!==Object.prototype?s.forEach(((t,e)=>{const r=new Array;n.forEach((t=>{r.push(t)})),r.push(e),o(r,a[0])})):r(t,a[0])};n.forEach((t=>{Object.keys(t).forEach((e=>{const a=new Array(e);o(a,t[e])}))}))})(t.clientId,t.attributes,e.AtfpBlockParseRules[t.name])},b=(t,e)=>{t.forEach((t=>{h(t,e),t.innerBlocks&&b(t.innerBlocks,e)}))},_=t=>{const e="google"===t.service?(t=>{let e=(new DOMParser).parseFromString(t,"text/html");return function(t){t.querySelector("body").querySelectorAll("*").forEach((t=>{let e=(t=>{const e=document.createElement("div");e.innerHTML=t;const a=e.firstElementChild;if(!a)return t;const n=a.outerHTML.match(/^<[^>]+>/)[0],o=a.tagName.toLowerCase(),r=new RegExp(`</${o}>`,"i"),s=a.outerHTML.match(r),l=`#atfp_open_translate_span#${n}#atfp_close_translate_span#`;let c=a.outerHTML.replace(n,l);if(s){const t=`#atfp_open_translate_span#</${o}>#atfp_close_translate_span#`;c=c.replace(r,t)}return a.outerHTML=c,e.innerHTML})(t.outerHTML);const a=document.createTextNode(e);t.parentNode.replaceChild(a,t)}))}(e),(t=>t.split(/(#atfp_open_translate_span#.*?#atfp_close_translate_span#)|'/).filter(Boolean).filter((t=>""!==t.trim())))(e.body.innerText)})(t.content):t.content,a=/#atfp_open_translate_span#[\s\S]*?#atfp_close_translate_span#/,n=/#atfp_open_translate_span#|#atfp_close_translate_span#/g;return React.createElement(React.Fragment,null,"google"===t.service?e.map(((t,e)=>a.test(t)?React.createElement("span",{key:e,className:"notranslate atfp-notraslate-tag",translate:"yes"},t.replace(n,"")):t)):e)},{parse:E}=wp.blocks,{select:v}=wp.data,S=t=>{const[e,a]=(0,r.useState)([]),n=t.blockRules,o=atfp_ajax_object.ajax_url,s={postId:parseInt(t.postId),atfp_nonce:atfp_ajax_object.ajax_nonce,action:atfp_ajax_object.action_fetch};(0,r.useEffect)((()=>{fetch(o,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams(s)}).then((t=>t.json())).then((e=>{const o=e.data;""!==o.content.trim()&&(o.content=E(o.content)),t.setPostData(o),((t,e)=>{Object.keys(t).forEach((a=>{if("content"===a)((t,e)=>{Object.values(t).forEach((t=>{h(t,e),t.innerBlocks&&b(t.innerBlocks,e)}))})(t[a],e);else{const e=`${a}SaveSource`;f("block-atfp/translate")[e](t[a])}}))})(o,n);const r=v("block-atfp/translate").getTranslationEntry();a(r),t.translateContent(r)})).catch((t=>{console.error("Error fetching post content:",t)}))}),[t.fetchKey]);let l=0;return React.createElement(React.Fragment,null,e.map(((e,a)=>void 0!==e.source&&""!==e.source.trim()&&React.createElement(React.Fragment,null,React.createElement("tr",{key:a},React.createElement("td",null,l++),React.createElement("td",{"data-source":"source_text"},e.source),React.createElement("td",{class:"translate",translate:"yes","data-key":e.id,"data-string-type":e.type},React.createElement(_,{service:t.service,content:e.source})))))))},R=t=>React.createElement("div",{className:`notice inline notice-info is-dismissible ${t.className}`},t.children.join(" "));function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},w.apply(null,arguments)}const{__:k}=wp.i18n,T=t=>{const{service:e,serviceLabel:a}=t,[n,o]=(0,g.useState)(0);return React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"atfp_translate_progress"},k("Automatic translation is in progress....","automatic-translation-for-polylang"),React.createElement("br",null),k("It will take few minutes, enjoy ☕ coffee in this time!","automatic-translation-for-polylang"),React.createElement("br",null),React.createElement("br",null),k("Please do not leave this window or browser tab while translation is in progress...","automatic-translation-for-polylang")),React.createElement("div",{className:`translator-widget ${e}`},React.createElement("h3",{class:"choose-lang"},k("Choose language","automatic-translation-for-polylang")," ",React.createElement("span",{class:"dashicons-before dashicons-translation"})),React.createElement("div",{id:"atfp_google_translate_element",style:{display:"google"===e?"block":"none"}}),React.createElement("div",{id:"atfp_yandex_translate_element",style:{display:"yandex"===e?"block":"none"}})),React.createElement("div",{className:"atfp_string_container"},React.createElement("table",{className:"scrolldown",id:"stringTemplate"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"notranslate"},k("S.No","automatic-translation-for-polylang")),React.createElement("th",{className:"notranslate"},k("Source Text","automatic-translation-for-polylang")),React.createElement("th",{className:"notranslate"},k("Translation","automatic-translation-for-polylang")))),React.createElement("tbody",null,React.createElement(S,w({blockRules:t.blockRules,setPostData:e=>{t.updatePostContent(e)}},t,{translateContent:t=>{let e="";t.forEach((t=>{void 0!==t.source&&""!==t.source.trim()&&(e+=" "+t.source)}));const a=e.trim().split(/\s+/).filter((t=>/[a-zA-Z]/.test(t))).length;o(a)}}))))),React.createElement(R,{className:"atfp_string_count"},k("Total Strings Translated:","automatic-translation-for-polylang")," ",n))},{__:x}=wp.i18n,L=t=>{const e=()=>{t.setPopupVisibility(!1)};return React.createElement("div",{className:"modal-footer",key:t.modalRender},React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translateStatus,onClick:()=>{const a=t.postContent,n=t.blockRules;d({postContent:a,modalClose:e,blockRules:n}),t.pageTranslate(!0)}},x("Save Translation","automatic-translation-for-polylang"))),React.createElement("div",{style:{display:"none"},className:"ytstats"},x("Wahooo! You have saved your valuable time via auto translating","automatic-translation-for-polylang"),React.createElement("strong",{className:"totalChars"})," ",x("characters using","automatic-translation-for-polylang"),React.createElement("strong",null,React.createElement("a",{href:"https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post",target:"_new"},x("Loco Automatic Translate Addon","automatic-translation-for-polylang")))))},{dispatch:j}=wp.data,C=t=>{t.querySelector(".atfp_translate_progress").style.display="none",t.querySelector(".atfp_string_container").style.animation="none",document.body.style.top="0";const e=t.querySelector("button.save_it");e.removeAttribute("disabled"),e.classList.add("translated"),e.classList.remove("notranslate"),(()=>{const t=document.getElementById("atfp_strings_model").querySelector(".atfp_string_container").querySelectorAll("td.translate[data-string-type]"),e={};var a;t.forEach((t=>{const a=t.innerText,n=t.dataset.key,o=t.dataset.stringType,r=t.closest("tr").querySelector('td[data-source="source_text"]').innerText;e[n]={type:o,translateContent:a,source:r}})),a=e,Object.keys(a).map((t=>{const e=a[t];if("content"!==e.type){const t=`${e.type}SaveTranslate`;j("block-atfp/translate")[t](e.translateContent)}else j("block-atfp/translate").contentSaveTranslate(t,e.translateContent,e.source)}))})()},O=t=>{let e=!1;const a=document.getElementById("atfp_strings_model"),n=a.querySelector(".atfp_string_container");n.scrollTop=0;const o=n.scrollHeight;Math.min(1e4,o),void 0!==o&&o>100?(a.querySelector(".atfp_translate_progress").style.display="block",setTimeout((()=>{(t=>{const{element:e,scrollSpeed:a}=t,n=e.scrollHeight,o=Math.min(a,n);let r=null;const s=()=>{const t=performance.now();r||(r=t);const a=(t-r)/o,l=(n+2e3)*a;e.scrollTop=l,a<1&&requestAnimationFrame(s)};s()})({element:n,scrollSpeed:1e4})}),2e3),n.addEventListener("scroll",(()=>{n.scrollTop+n.clientHeight+50>=n.scrollHeight&&!e&&(t(),C(a),e=!0)})),n.clientHeight+10>=o&&setTimeout((()=>{t(),C(a)}),1500)):setTimeout((()=>{t(),C(a)}),2e3)},N=(t,e,a,n,o,r,s)=>{var l={keycode:{ESCAPE:27},getRequest:function(){return t.XDomainRequest?new t.XDomainRequest:t.XMLHttpRequest?new t.XMLHttpRequest:null},loadScript:function(t,a,n){var o=e.createElement("script");o.src=t,o.addEventListener("load",(function t(){this.removeEventListener("load",t,!1),n()}),!1),a.appendChild(o)},loadResource:function(e,a){var n=this.getRequest();return n?(n.onload=function(){a(this.responseText)},n.open("GET",e,!0),t.setTimeout((function(){n.send()}),0),n):null},getStyleList:function(t){var e=t.getAttribute("class");return e?e.replace(/\s+/g," ").trim().split(" "):[]},hasStyleName:function(t,e){var a=this.getStyleList(t);return!!a.length&&a.indexOf(e)>=0},addStyleName:function(t,e){var a=this.getStyleList(t);a.push(e),t.setAttribute("class",a.join(" "))},removeStyleName:function(t,e){var a=this.getStyleList(t),n=a.indexOf(e);n>=0&&(a.splice(n,1),t.setAttribute("class",a.join(" ")))},isSupportedBrowser:function(){return"localStorage"in t&&"querySelector"in e&&"addEventListener"in t&&"getComputedStyle"in t&&"CSS1Compat"===e.compatMode}},c=function(t,e){var a=this;t.addEventListener("click",(function(t){a.onClick(t)}),!1),this._element=t,this._contentElement=e||this._element};c.prototype.onClick=function(){},c.prototype.setText=function(t){return this._contentElement.textContent=t,this};var i=function(t,e){var a=this;t.reset(),t.addEventListener("click",(function(t){var e=t.target;"value"in e&&a.onSelect(e.value)}),!1),t.addEventListener("change",(function(t){alert("form change state");var e=t.target;e.checked&&a.onChange(e.value)}),!1),this._form=t,this._itemName=e};i.prototype.onSelect=function(){},i.prototype.onChange=function(){},i.prototype.isHidden=function(){return this._form.hasAttribute("hidden")},i.prototype.getItems=function(){return this._form[this._itemName]||[]},i.prototype.getValue=function(){var t,e,a=this.getItems();for(t=0,e=a.length;t<e;t++)if(a[t].checked)return a[t].value;return""},i.prototype.setValue=function(t){var e,a,n=this.getItems();if(t===this.getValue())return this;for(e=0,a=n.length;e<a;e++)if(n[e].value===t){n[e].checked=!0,this.onChange(t);break}return this},i.prototype.setHidden=function(t){return(t=!!t)!==this.isHidden()&&(this._form[(t?"set":"remove")+"Attribute"]("hidden",""),this.onHiddenChange(t)),this},i.prototype.onHiddenChange=function(){};var u=function(a){var n,o=this,c=a.select,i=a.element,u=a.storage,p=(a.autoMode,a.pageLang),d=(a.userLang,a.translator),m=a.leftButton,g=a.rightButton,f=a.closeButton;if(this._element=i,this._pageLang=p,this._translator=d,this.onStateChange=function(t,e){"active"===t&&u.setValue("active",e)},c.onSelect=function(t){this.setHidden(!0),o.translate(t),O(s)},c.onChange=function(t){u.setValue("lang",t),g.setText(t),o.setState("invalid",t===p)},c.onHiddenChange=function(a){var n,r=e.documentElement;o.setState("expanded",!a),a||(o.setState("right",!1).setState("bottom",!1),i.focus(),(n=this._form.getBoundingClientRect()).right+(t.pageXOffset||r.scrollLeft)+1>=Math.max(r.clientWidth,r.scrollWidth)&&o.setState("right",!0),n.bottom+(t.pageYOffset||r.scrollTop)+1>=Math.max(r.clientHeight,r.scrollHeight)&&o.setState("bottom",!0))},i.addEventListener("blur",(function(){c.setHidden(!0)}),!1),i.addEventListener("keydown",(function(t){t.keyCode===l.keycode.ESCAPE&&c.setHidden(!0)}),!1),d.on("error",(function(){this.abort(),o.setState("busy",!1).setState("error",!0)})),d.on("progress",(function(t){switch(t){case 0:o.setState("busy",!0).setState("active",!0);break;case 100:o.setState("done",!0).setState("busy",!1)}})),m.onClick=function(){c.setHidden(!0),o.translate(c.getValue()),O(s)},g.onClick=function(){o.hasState("active")?(d.undo(),o.setState("busy",!1).setState("done",!1).setState("error",!1).setState("active",!1)):c.setHidden(!c.isHidden())},f.onClick=function(){c.setHidden(!0)},null!=r)var y=r;switch(y){case"nb":case"nn":n="no";break;default:n=y}n&&(c.setValue(n),u.getValue("active"))};u.prototype.hasState=function(t){return l.hasStyleName(this._element,"yt-state_"+t)},u.prototype.setState=function(t,e){return(e=!!e)===this.hasState(t)||(l[(e?"add":"remove")+"StyleName"](this._element,"yt-state_"+t),this.onStateChange(t,e)),this},u.prototype.translate=function(t){return t&&!this.hasState("active")&&this._translator.translate(this._pageLang,t),this},u.prototype.onStateChange=function(){};var p=function(e){this._name=e;try{this._data=t.JSON.parse(t.localStorage[e])}catch(t){this._data={}}};p.prototype.getValue=function(t){return this._data[t]},p.prototype.setValue=function(e,a){this._data[e]=a;try{t.localStorage[this._name]=t.JSON.stringify(this._data)}catch(t){}};var d=e.getElementById(n.widgetId);if(d&&l.isSupportedBrowser()){var m=function(){l.loadScript("https://yastatic.net/s3/translate/v21.4.7/js/tr_page.js",d,(function(){l.loadResource("https://translate.yandex.net/website-widget/v1/widget.html",(function(t){var e;t&&(d.innerHTML=t,e=d.querySelector(".yt-widget"),n.widgetTheme&&e.setAttribute("data-theme",n.widgetTheme),new u({select:new i(e.querySelector(".yt-listbox"),"yt-lang"),element:e,storage:new p("yt-widget"),autoMode:"true"===n.autoMode,pageLang:n.pageLang,userLang:(a.language||a.userLanguage||"").split("-")[0],translator:new o.PageTranslator({srv:"tr-url-widget",url:"https://translate.yandex.net/api/v1/tr.json/translate",autoSync:!0,maxPortionLength:600}),leftButton:new c(e.querySelector(".yt-button_type_left")),rightButton:new c(e.querySelector(".yt-button_type_right"),e.querySelector(".yt-button_type_right > .yt-button__text")),closeButton:new c(e.querySelector(".yt-button_type_close"))}))}))}))};"complete"===e.readyState||"interactive"===e.readyState?m():e.addEventListener("DOMContentLoaded",m,!1)}},A={google:t=>{const{sourceLang:e,targetLang:a,translateStatus:n,ID:o}=t;new google.translate.TranslateElement({pageLanguage:e,includedLanguages:a,defaultLanguage:e,multilanguagePage:!0,autoDisplay:!1},o),document.querySelector(`#${o}`).addEventListener("change",(()=>{O(n)}))},yandex:t=>{const e=window;N(e,e.document,e.navigator,{pageLang:t.sourceLang,autoMode:"false",widgetId:"atfp_yandex_translate_element",widgetTheme:"light"},e.yt=e.yt||{},t.targetLang,t.translateStatus)}};function P(){return P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},P.apply(null,arguments)}const H=t=>{const[e,a]=(0,r.useState)(t.visibility),[n,o]=(0,r.useState)(""),[s,l]=(0,r.useState)(!0),[c,i]=(0,r.useState)({}),u=e=>{"google"===t.service&&document.querySelector("div.skiptranslate iframe.skiptranslate")?.contentDocument?.querySelector('a[title="Close"] img[alt="Close"]')?.click(),l(!0),a(!1),t.updateFetch(e)},p=()=>{l(!1)};return(0,r.useEffect)((()=>{document.documentElement.setAttribute("translate","no"),document.body.classList.add("notranslate");const e=t.service,a=`atfp_${e}_translate_element`;void 0===c[e]&&!0!==c[e]&&(i((t=>({...t,[e]:!0}))),A[e]({sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatus:p,ID:a}))}),[t.service]),(0,r.useEffect)((()=>{a(!0)}),[t.modalRender]),React.createElement(React.Fragment,null,React.createElement("div",{class:"modal-container",style:{display:e?"block":"none"}},React.createElement("div",{class:"modal-content"},React.createElement(m,{modalRender:t.modalRender,setPopupVisibility:u,postContent:n,blockRules:t.blockRules,translateStatus:s,pageTranslate:t.pageTranslate}),React.createElement(T,P({},t,{updatePostContent:t=>{o(t)},blockRules:t.blockRules})),React.createElement(L,{modalRender:t.modalRender,setPopupVisibility:u,postContent:n,blockRules:t.blockRules,translateStatus:s,pageTranslate:t.pageTranslate}))))},{__:q}=wp.i18n,B=t=>{const[e,a]=(0,r.useState)(!1),[n,s]=(0,r.useState)({}),[l,c]=(0,r.useState)({}),[i,u]=(0,r.useState)({}),[p,d]=(0,r.useState)(!1),m=atfp_ajax_object.ajax_url,g=atfp_ajax_object.atfp_url+"assets/images/",f={atfp_nonce:atfp_ajax_object.ajax_nonce,action:atfp_ajax_object.action_block_rules},y=t=>{a(t)};(0,r.useEffect)((()=>{const t=document.querySelector('input#atfp-translate-button[name="atfp_meta_box_translate"]');t&&t.addEventListener("click",(()=>{d((t=>!t))}))}),[]),(0,r.useEffect)((()=>{Object.keys(l).length>0||!e||fetch(m,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams(f)}).then((t=>t.json())).then((t=>{const e=JSON.parse(t.data.blockRules);c(e)})).catch((t=>{console.error("Error fetching post content:",t)}))}),[e]),(0,r.useEffect)((()=>{if(Object.keys(l).length<=0)return;const a=new URLSearchParams(window.location.search),r=n,s=r.dataset&&r.dataset.service,c=r.dataset&&r.dataset.serviceLabel,u=atfp_ajax_object.source_lang,p=a.get("new_lang"),m=a.get("from_post"),g=document.getElementById("atfp_strings_model");e&&Object.keys(l).length>0&&(o().render(React.createElement(H,{blockRules:l,visibility:e,updateFetch:y,postId:m,service:s,serviceLabel:c,sourceLang:u,targetLang:p,modalRender:i,pageTranslate:t.pageTranslate}),g),d((t=>!t)))}),[e,l]);const h=t=>{let e=t.target.classList.contains("atfp-service-btn")?t.target:t.target.closest(".atfp-service-btn");u((t=>t+1)),s(e),a(!0)};return React.createElement(React.Fragment,null,p&&React.createElement("div",{className:"modal-container",style:{display:p?"block":"none"}},React.createElement("div",{className:"atfp-settings modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("h2",null,q("Step 1 - Select Translation Provider (Beta)","automatic-translation-for-polylang")),React.createElement("span",{className:"close",onClick:()=>d(!1)},"×")),React.createElement("hr",null),React.createElement("strong",{className:"atlt-heading"},q("Translate Using Yandex Page Translate Widget","automatic-translation-for-polylang")),React.createElement("div",{className:"inputGroup"},React.createElement("button",{className:"atfp-service-btn translate button button-primary","data-service":"yandex","data-service-label":"Yandex Translate",onClick:h},q("Yandex Translate","automatic-translation-for-polylang")),React.createElement("br",null),React.createElement("a",{href:"https://translate.yandex.com/",target:"_blank"},React.createElement("img",{className:"pro-features-img",src:`${g}powered-by-yandex.png`,alt:"powered by Yandex Translate Widget"}))),React.createElement("hr",null),React.createElement("strong",{className:"atfp-heading"},q("Translate Using Google Page Translate Widget","automatic-translation-for-polylang")),React.createElement("div",{className:"inputGroup"},React.createElement("button",{className:"atfp-service-btn translate button button-primary","data-service":"google","data-service-label":"Google Translate",onClick:h},q("Google Translate (Beta)","automatic-translation-for-polylang")),React.createElement("span",{className:"proonly-button alsofree"},"✔ ",q("Available","automatic-translation-for-polylang")),React.createElement("br",null),React.createElement("a",{href:"https://translate.google.com/",target:"_blank"},React.createElement("img",{style:{marginTop:"5px"},src:`${g}powered-by-google.png`,alt:q("powered by Google Translate Widget","automatic-translation-for-polylang")}))),React.createElement("hr",null),React.createElement("ul",{style:{margin:"0"}},React.createElement("li",null,React.createElement("span",{style:{color:"green"}},"✔")," ",q("Unlimited Translations with Google Translate","automatic-translation-for-polylang")),React.createElement("li",null,React.createElement("span",{style:{color:"green"}},"✔")," ",q("No API Key Required for Google Translate","automatic-translation-for-polylang")),React.createElement("li",null,React.createElement("span",{style:{color:"green"}},"✔")," ",q("Supports Multiple Languages","automatic-translation-for-polylang")," - ",React.createElement("a",{href:"https://en.wikipedia.org/wiki/Google_Translate#Supported_languages",target:"_blank"},q("See Supported Languages","automatic-translation-for-polylang")))),React.createElement("hr",null),React.createElement("div",{className:"modal-footer"},React.createElement("button",{className:"atfp-setting-close",onClick:()=>d(!1)},q("Close","automatic-translation-for-polylang"))))))},M="SAVE_SOURCE_TITLE",I="SAVE_TRANSLATE_TITLE",V="SAVE_SOURCE_EXCERPT",$="SAVE_TRANSLATE_EXCERPT",D="SAVE_SOURCE_CONTENT",F="SAVE_TRANSLATE_CONTENT",U={title:{},excerpt:{},content:[]},G=t=>({type:M,text:t}),W=t=>({type:I,text:t}),X=t=>({type:V,text:t}),Y=t=>({type:$,text:t}),J=(t,e,a)=>({type:D,text:e,id:t,index:a}),K=(t,e,a)=>({type:F,text:e,id:t,source:a}),z=t=>{const e=new Array;return e.push({id:"title",source:t.title.source,type:"title",target:t.title.target||""}),e.push({id:"excerpt",source:t.excerpt.source,type:"excerpt",target:t.excerpt.target||""}),Object.keys(t.content).map((a=>{const n=t.content[a].index+2;e[n]={type:"content",id:a,source:t.content[a].source,target:t.content[a].target||""}})),e},Z=(t,e,a,n=null)=>"content"!==e&&t[e].source===a?t[e].target:t[e]&&t[e][n]&&t[e][n].source===a?void 0!==t[e][n].target?t[e][n].target:t[e][n].source:a,{createReduxStore:Q,register:tt}=wp.data;tt(Q("block-atfp/translate",{reducer:(t=U,e)=>{switch(e.type){case M:return{...t,title:{...t.title,source:e.text}};case I:return{...t,title:{...t.title,target:e.text}};case V:case $:return{...t,excerpt:{...t.excerpt,target:e.text}};case D:return{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],source:e.text,index:e.index}}};case F:return t.content[e.id].source===e.source?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],target:e.text}}}:t;default:return t}},actions:e,selectors:a}));const et=()=>{const[t,e]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{if(t){const t=document.querySelector('input#atfp-translate-button[name="atfp_meta_box_translate"]');t&&(t.disabled=!0)}}),[t]),React.createElement(React.Fragment,null,!t&&React.createElement(B,{pageTranslate:t=>{e(t)}}))};(()=>{let t=new Array;t.push('\x3c!-- The Modal --\x3e<div id="atfp-setting-modal"></div>','<div id="atfp_strings_model" class="modal atfp_custom_model"></div>'),t.forEach((t=>{document.body.insertAdjacentHTML("beforeend",t)}))})(),document.addEventListener("DOMContentLoaded",(()=>{wp.element.render(React.createElement(et,null),document.getElementById("atfp-setting-modal"))}))})();